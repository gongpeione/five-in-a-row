!function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(i){var o=t.call(this)||this;return o.chessBorad=[],o.curColor=e.BLACK_STONE,o.positionRecord=[],o.HEAD=-1,o.end=!1,o.boradSize=i||19,o.initChessBoard(),o}return n(e,t),e.prototype.put=function(t,e){if(!this.end){if(void 0===this.chessBorad[t][e])throw new Error("Wrong position.");this.HEAD<this.positionRecord.length-1&&(this.positionRecord=this.positionRecord.slice(0,this.HEAD+1)),this.positionRecord.some(function(i){var o=i[0],n=i[1];return o==t&&n==e})||(this.chessBorad[t][e]=this.curColor,this.emit("put",{x:t,y:e,color:this.curColor}),this.positionRecord.push([+t,+e]),this.HEAD++,this.checkResult(),this.changeColor())}},e.prototype.remove=function(t,e){this.pointExistAndRet(t,e)&&(this.chessBorad[t][e]=null,this.emit("remove",{x:t,y:e}))},e.prototype.changeColor=function(){this.curColor=this.curColor===e.BLACK_STONE?e.WHITE_STONE:e.BLACK_STONE},Object.defineProperty(e.prototype,"lastPosition",{get:function(){return this.positionRecord[this.positionRecord.length-1]},enumerable:!0,configurable:!0}),e.prototype.undo=function(){-1!==this.HEAD&&(this.emit("undo",{x:this.positionRecord[this.HEAD][0],y:this.positionRecord[this.HEAD][1],color:this.curColor}),this.HEAD>=0&&this.HEAD--,this.end=!1,this.changeColor())},e.prototype.redo=function(){this.HEAD>=this.positionRecord.length-1||(this.emit("redo",{x:this.positionRecord[this.HEAD+1][0],y:this.positionRecord[this.HEAD+1][1],color:this.curColor}),this.HEAD<this.positionRecord.length-1&&this.HEAD++,this.changeColor())},e.prototype.initChessBoard=function(){this.end=!1,this.curColor=e.BLACK_STONE,this.chessBorad=[],this.positionRecord=[],this.HEAD=-1;for(var t=0;t<this.boradSize;t++)this.chessBorad.push(Array(this.boradSize).fill(null).slice());console.log(this.chessBorad)},e.prototype.pointExistAndRet=function(t,e){if(this.positionRecord.slice(0,this.HEAD+1).some(function(i){var o=i[0],n=i[1];return o===t&&n===e}))return t>=0&&t<=this.boradSize-1&&e>=0&&e<=this.boradSize-1&&this.chessBorad[t][e]?this.chessBorad[t][e]:void 0},e.prototype.checkResult=function(){for(var t=this,e=Array(4).fill(0),i=Array(8).fill(!0),o=this.lastPosition,n=o[0],r=o[1],s=1;s<=5;s++){[[n+s,r],[n-s,r],[n,r+s],[n,r-s],[n+s,r+s],[n-s,r-s],[n+s,r-s],[n-s,r+s]].forEach(function(o,n){var r=o[0],s=o[1];i[n]&&(t.pointExistAndRet(r,s)===t.curColor?e[~~(n/2)]++:i[n]=!1)})}e.some(function(t){return t>=4})&&(this.end=!0,this.emit("end",this.curColor))},e.BLACK_STONE=Symbol("BLACK_STONE"),e.WHITE_STONE=Symbol("WHITE_STONE"),e}(i(1).EventEmitter);e.default=r},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,s,c,h,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(r(i=this._events[t]))return!1;if(o(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),i.apply(this,c)}else if(n(i))for(c=Array.prototype.slice.call(arguments,1),s=(a=i.slice()).length,h=0;h<s;h++)a[h].apply(this,c);return!0},i.prototype.addListener=function(t,e){var s;if(!o(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned&&(s=r(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!o(e))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},i.prototype.removeListener=function(t,e){var i,r,s,c;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(i=this._events[t]).length,r=-1,i===e||o(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(i)){for(c=s;c-- >0;)if(i[c]===e||i[c].listener&&i[c].listener===e){r=c;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(o(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(o(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),s=i(0),c=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.dpi=window.devicePixelRatio||1,s.positionRecord=[],s.PutEvent=function(t){if("dom"===s.type){if(!t.target.dataset.position)return;var e=t.target.dataset.position.split(","),i=e[0],o=e[1];s.emit("putting",{x:i,y:o})}if("canvas"===s.type){var n=s.width/s.size,r=t,c=r.offsetX,h=r.offsetY;i=~~(c*s.dpi/n),o=~~(h*s.dpi/n);s.emit("putting",{x:i,y:o})}},s.container="string"==typeof e?document.querySelector(e):e,s.type=i.toLowerCase()||"dom",s.size=o||19,s.width=n*s.dpi||500,s.height=r*s.dpi||500,s.initContainer(),s.on("put",function(t){var e=t.x,i=t.y,o=t.color;s.put(e,i,o)}),s.on("undo",function(t){var e=t.x,i=t.y;t.color;if("dom"===s.type&&(s.container.querySelector('[data-position="'+e+","+i+'"]').innerHTML=""),"canvas"===s.type){s.ctx.clearRect(0,0,s.width,s.height),s.drawBoard();var o=s.positionRecord.slice(0);s.positionRecord=[],o.forEach(function(t){var o=t[0],n=t[1],r=t[2];o===e&&n===i||s.put(o,n,r)})}}),s.on("redo",function(t){var e=t.x,i=t.y,o=t.color;s.put(e,i,o)}),s}return n(e,t),e.prototype.initContainer=function(){this.borad||(this.container.classList.add("gee-five-in-a-row"),this.drawBoard(),this.container.appendChild(this.borad),this.container.addEventListener("click",this.PutEvent))},e.prototype.drawBoard=function(){if("dom"===this.type){if(this.borad)return void Array.from(this.borad.querySelectorAll("span"),function(t){return t.remove()});this.borad=document.createElement("ol");for(var t=0;t<this.size;t++){var e=document.createElement("li"),i=document.createElement("ol");e.classList.add("row"),i.classList.add("row");for(var o=0;o<this.size;o++){var n=document.createElement("li");n.dataset.position=t+","+o,i.appendChild(n)}e.appendChild(i),this.borad.appendChild(e)}this.container.innerHTML=""}else{this.borad=this.borad||document.createElement("canvas"),this.ctx=this.ctx||this.borad.getContext("2d"),this.borad.width=this.width,this.borad.height=this.height,this.borad.style.width=this.width/this.dpi+"px",this.borad.style.height=this.height/this.dpi+"px";var r=this.width/this.size,s=r/2;this.ctx.beginPath();for(t=0;t<this.size;t++)this.ctx.moveTo(r*t+s,s),this.ctx.lineTo(r*t+s,s+r*(this.size-1));for(t=0;t<this.size;t++)this.ctx.moveTo(s,r*t+s),this.ctx.lineTo(s+r*(this.size-1),r*t+s);this.ctx.stroke()}},e.prototype.put=function(t,e,i){if("dom"===this.type){var o=document.createElement("span");o.classList.add(i===s.default.BLACK_STONE?"black":"white"),this.container.querySelector('[data-position="'+t+","+e+'"]').appendChild(o)}if("canvas"===this.type){var n=this.width/this.size,r=n/2,c=i===s.default.BLACK_STONE?"#000":"#fff",h=this.ctx;h.fillStyle=c,h.shadowColor="rgba(0,0,0,.5)",h.shadowOffsetX=0,h.shadowOffsetY=0,h.shadowBlur=10,h.beginPath(),h.arc(t*n+r,e*n+r,n/1.1/2,0,2*Math.PI,!0),h.closePath(),h.fill(),this.positionRecord.push([+t,+e,i])}},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),e}(r.EventEmitter);e.default=c},function(t,e,i){"use strict";var o,n=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),s=i(0),c=i(2),h={boardSize:19,container:document.body,type:"dom",width:500,height:500},a=function(t){function e(e){var i=t.call(this)||this;return i.opt=Object.assign(h,e||{}),i.core=new s.default(i.opt.boardSize),i.renderer=new c.default(i.opt.container,i.opt.type,i.opt.boardSize,i.opt.width,i.opt.height),i.renderer.on("putting",function(t){i.core.put(t.x,t.y)}),i.core.on("put",function(t){i.renderer.emit("put",t)}),i.core.on("end",function(t){i.emit("end",t)}),i.core.on("undo",function(t){i.renderer.emit("undo",t)}),i.core.on("redo",function(t){i.renderer.emit("redo",t)}),i}return n(e,t),e.prototype.reset=function(){this.renderer.drawBoard(),this.core.initChessBoard()},e.prototype.undo=function(){this.core.undo()},e.prototype.redo=function(){this.core.redo()},e}(r.EventEmitter);e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),n=i(0);i(9);var r=new o.default({container:"div.dom"});r.on("end",function(t){var e=t===n.default.BLACK_STONE?"Black":"White";alert(e+" Win!")}),document.querySelector("button.dom").addEventListener("click",function(){r.reset()}),document.querySelector("button.domundo").addEventListener("click",function(){r.undo()}),document.querySelector("button.domredo").addEventListener("click",function(){r.redo()});var s=new o.default({container:"div.canvas",type:"canvas"});s.on("end",function(t){var e=t===n.default.BLACK_STONE?"Black":"White";alert(e+" Win!")}),document.querySelector("button.canvas").addEventListener("click",function(){s.reset()}),document.querySelector("button.canvasundo").addEventListener("click",function(){s.undo()}),document.querySelector("button.canvasredo").addEventListener("click",function(){s.redo()})},,,,,function(t,e){}]);